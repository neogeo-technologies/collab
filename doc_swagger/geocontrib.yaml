openapi: 3.0.0
info:
  title: Documentation API GéoContrib
  description: Cette page décrit l'ensemble des services REST offerts par l'API GéoContrib.
  contact:
    email: contact@geocontrib.fr
  version: 1.0.0
servers:
  - url: geocontrib.dev.neogeo.fr/geocontrib/api/
    variables: {}
  - url: geocontrib.dev.neogeo.fr/geocontrib/api/
    variables: {}
paths:
  /api/v2/projects:
    get:
      tags:
        - projects
      summary: getProjects
      description: |-
        Ce service permet de récuperer tous les projects.
      operationId: getProjects
      parameters:
        - name: search
          in: query
          description: Recherche par un paramètre de requête ?search=..., et peut être délimité par des virgules et/ou des espaces
          required: false
          schema:
            type: string
        - name: is_project_type
          in: query
          description: Recherche par un paramètre de requête ?is_project_type=..., true/false
          required: false
          schema:
            type: string
        - name: moderation
          in: query
          description: Recherche par un paramètre de requête ?moderation=..., true/false
          required: false
          schema:
            type: string
        - name: access_level
          in: query
          description: Recherche par un paramètre de requête ?access_level=..., anonymous/logged_user/contributor/super_contributor/moderator/admin
          required: false
          schema:
            type: string
        - name: user_access_level
          in: query
          description: Recherche par un paramètre de requête ?user_access_level=..., anonymous/logged_user/contributor/super_contributor/moderator/admin
          schema:
            type: string
        - name : accessible
          in: query
          description: Recherche par un paramètre de requête ?accessible=...,  true/false
          schema:
            type: string
        - name : myaccount
          in: query
          description: Recherche par un paramètre de requête ?myaccount=...,  true/false
          schema:
            type: string
        - name : page
          in: query
          description: Recherche par un paramètre de requête ?page=...,  1/2/3 ...
          schema:
            type: string
      responses:
        '200':
          description: Résultat
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/ProjectsGet'
            application/json:
              schema:
                $ref: '#/components/schemas/ProjectsGet'
        '404':
          description:  | 
            {"detail": "Pas trouvé."}
          headers: {}
          content: {}
      deprecated: false
      security: []
    post:
      tags:
        - projects
      summary: addProjects
      description: |-
        Ce service permet de créer un project.
      operationId: addProjects
      parameters: []
      requestBody:
        description: Ce service permet de créer un projet sur GéoContrib.
                    En réponse un nouveau projet est créé et son  contenu sont affiché.
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProjectPost'
        required: true
      responses:
        '201':
          description: Création
          content:
           application/json:
            schema:
                type: object
           application/xml:
            schema:
                type: object
        '401':
          description: |

        '400':
          description:  |

        '403':
          description: | 
        '405':
          description: Invalid input
          headers: {}
          content: {}
      deprecated: false
      security: []

  /api/v2/projects/{slug}:
    get:
      tags:
        - projects
      summary: getProject
      description: |-
        Ce service permet de récuperer le detail d'un project.
      operationId: getProject
      parameters:
        - name : slug
          in: path
          description: Recherche par slug (string)
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Résultat
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/ProjectGet'
            application/json:
              schema:
                $ref: '#/components/schemas/ProjectGet'
        '404':
          description:   | 
            {"detail": "Pas trouvé."}
          headers: {}
          content: {}
    put:
      tags:
        - projects
      summary: updateProject
      description: |-
        Ce service permet de mettre à jour un project.
      operationId: updateProject
      parameters:
        - name : slug
          in: path
          description: Recherche par slug (string)
          required: true
          schema:
            type: string
      requestBody:
        description: Ce service permet de mettre à jour un projet sur GéoContrib.
                    En réponse le projet est mis à jour et son  contenu sont affiché.
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProjectUpdate'
        required: true
      responses:
        '200':
          description: Mise à jour
          content:
           application/json:
            schema:
                type: object
           application/xml:
            schema:
                type: object
        '401':
          description: |

        '400':
          description:  |

        '403':
          description: | 
        '405':
          description: Invalid input
          headers: {}
          content: {}
      deprecated: false
      security: []
    delete:
      tags:
        - projects
      summary: deleteProject
      description: Suppression d'un projet
      operationId: deleteProject
      parameters:
        - name : slug
          in: path
          description: Recherche par slug (string)
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Supression du projet a été faite avec succès
        '403':
          description: |-
            "detail :	"Informations d'authentification non fournies."
            "detail": "Nom d'utilisateur et/ou mot de passe non valide(s)."
        '404':
          description:   | 
            {"detail": "Pas trouvé."}
      deprecated: false
      security: []
  /api/projects/{slug}/duplicate:
    post:
      tags:
        - projects
      summary: addProjectDuplicate
      description: |-
        Ce service permet de dupliquer un project.
      operationId: addProjectDuplicate
      parameters:
        - name : slug
          in: path
          description: Creation du project à partir de son slug (string)
          required: true
          schema:
            type: string
      requestBody:
        description: Ce service permet de dupliquer un projet sur GéoContrib.
                    En réponse un nouveau projet est créé et son contenu sont affiché.
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProjectPost'
        required: true
      responses:
        '201':
          description: Création
          content:
           application/json:
            schema:
                type: object
           application/xml:
            schema:
                type: object
        '401':
          description: |

        '400':
          description:  |

        '403':
          description: | 
        '405':
          description: Invalid input
          headers: {}
          content: {}
      deprecated: false
      security: []
  /api/projects/{slug}/thumbnail:
    get:
      tags:
        - projects
      summary: getProjectThumbnail
      description: |-
        Ce service permet de récupérer la vignette d'un project.
      operationId: getProjectThumbnail
      parameters:
        - name : slug
          in: path
          description: Slug (string) du projet
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Vignette image en format JPEG
          content:
            image/jpeg:
              schema:
                type: string
                format: binary
        '401':
          description: |

        '400':
          description:  |

        '403':
          description: | 
        '405':
          description: Invalid input
          headers: {}
          content: {}
      deprecated: false
      security: []
    put:
      tags:
        - projects
      summary: putProjectThumbnail
      description: |-
        Ce service permet de mettre à jour la vignette d'un project.
      operationId: putProjectThumbnail
      parameters:
        - name : slug
          in: path
          description: Slug (string) du projet
          required: true
          schema:
            type: string
      requestBody:
        description: Ce service permet de mettre à jour la vignette d'un projet sur GéoContrib.
                    En réponse le projet est mis à jour et son  contenu sont affiché.
        content: 
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
        required: true
      responses:
        '200':
          description: Detail du projet
          content:
           application/json:
            schema:
                $ref: '#/components/schemas/ProjectsGet'
           application/xml:
            schema:
                $ref: '#/components/schemas/ProjectsGet'
        '401':
          description: |

        '400':
          description:  |

        '403':
          description: | 

        '405':
          description: Invalid input
          headers: {}
          content: {}
      deprecated: false
      security: []
  /api/projects/{slug}/utilisateurs:
    get:
      tags:
        - projects
      summary: getProjectUtilisateurs
      description: |-
        Ce service permet de récupérer tous les utilisateurs d'un project.
      operationId: getProjectUtilisateurs
      parameters:
        - name : slug
          in: path
          description: Slug (string) du projet
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Résultat
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/UserProject'
            application/json:
              schema:
                $ref: '#/components/schemas/UserProject'
        '401':
          description: |

        '400':
          description:  |

        '403':
          description: | 
        '405':
          description: Invalid input
          headers: {}
          content: {}
      deprecated: false
      security: []
    put:
      tags:
        - projects
      summary: putProjectUtilisateurs
      description: |-
        Ce service permet de récupérer tous les utilisateurs d'un project.
      operationId: putProjectUtilisateurs
      parameters:
        - name : slug
          in: path
          description: Slug (string) du projet
          required: true
          schema:
            type: string
      requestBody:
        description: Ce service permet de mettre à les utilisateurs d'un projet.
                    En réponse les utilisateurs du projet sont mis à jour et son  contenu sont affiché.
        content: 
          application/json:
            schema:
              $ref: '#/components/schemas/UserProject'
        required: true
      responses:
        '200':
          description: Résultat
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/UserProject'
            application/json:
              schema:
                $ref: '#/components/schemas/UserProject'
        '401':
          description: |

        '400':
          description:  |

        '403':
          description: | 
        '405':
          description: Invalid input
          headers: {}
          content: {}
      deprecated: false
      security: []
  /api/projects/{slug}/feature-bbox:
    get:
      tags:
        - projects
      summary: getProjectFeatureBbox
      description: |-
        Ce service permet de récupérer une bbox des signalements d'un project.
      operationId: getProjectFeatureBbox
      parameters:
        - name : slug
          in: path
          description: Slug (string) du projet
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Résultat
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/BboxProject'
            application/json:
              schema:
                $ref: '#/components/schemas/BboxProject'
        '401':
          description: |

        '400':
          description:  |

        '403':
          description: | 
        '405':
          description: Invalid input
          headers: {}
          content: {}
      deprecated: false
      security: []
  /api/projects/{slug}/comments:
    get:
      tags:
        - projects
      summary: getProjectComments
      description: |-
        Ce service permet de récupérer des dernières commentaires sur des signalements d'un project.
      operationId: getProjectComments
      parameters:
        - name : slug
          in: path
          description: Slug (string) du projet
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Résultat
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/ProjectComments'
            application/json:
              schema:
                $ref: '#/components/schemas/ProjectComments'
        '401':
          description: |

        '400':
          description:  |

        '403':
          description: | 
        '405':
          description: Invalid input
          headers: {}
          content: {}
      deprecated: false
      security: []
  /api/projects/{slug}/feature-type/{feature_type_slug}/:
    get:
      tags:
        - projects
      summary: getSignalementsProject
      description: |-
        Ce service permet le téléchargement des signalements lié à un projet.
      operationId: getSignalementsProject
      parameters:
        - name : slug
          in: path
          description: Slug (string) du projet
          required: true
          schema:
            type: string
        - name: feature_type_slug
          in: path
          description: Slug (string) du type de signalement
          required: true
          schema:
            type: string
        - name: format_export
          in: query
          description: Type de format attendu => geojson / csv
          schema:
            type: string
      responses:
        '200':
          description: Fichier des signalements en format geojson ou csv
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GeojsonFeatures'
        '401':
          description: |

        '400':
          description:  |

        '403':
          description: | 
        '405':
          description: Invalid input
          headers: {}
          content: {}
      deprecated: false
      security: []
  /api/projects/{slug}/feature-search:
    get:
      tags:
        - projects
      summary: getProjectSearch
      description: |-
        Ce service permet de récupérer des signalements d'un project, selon paramètres.
      operationId: getProjectSearch
      parameters:
        - name : slug
          in: path
          description: Slug (string) du projet
          required: true
          schema:
            type: string
        - name: geom
          in: query
          description: Type de format attendu => geojson / csv
          schema:
            type: string
        - name: status
          in: query
          description: Type de format attendu => geojson / csv
          schema:
            type: string
        - name: feature_type_slug
          in: query
          description: Type de format attendu => geojson / csv
          schema:
            type: string
        - name: title
          in: query
          description: Type de format attendu => geojson / csv
          schema:
            type: string
        - name: feature_id
          in: query
          description: Type de format attendu => geojson / csv
          schema:
            type: string
        - name: exclude_feature_id
          in: query
          description: Type de format attendu => geojson / csv
          schema:
            type: string
      responses:
        '200':
          description: Résultat
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/FeatureSearch'
            application/json:
              schema:
                $ref: '#/components/schemas/FeatureSearch'
        '401':
          description: |

        '400':
          description:  |

        '403':
          description: | 
        '405':
          description: Invalid input
          headers: {}
          content: {}
      deprecated: false
      security: []

  /api/projects/{slug}/subscription/:
    get:
      tags:
        - projects
      summary: getProjectSubscription
      description: |-
        Ce service permet de récupérer la subscription à un project de l'utilisateur connecté.
      operationId: getProjectSubscription
      parameters:
        - name : slug
          in: path
          description: Slug (string) du projet
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Résultat
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/Subscription'
            application/json:
              schema:
                $ref: '#/components/schemas/Subscription'
        '401':
          description: |

        '400':
          description:  |

        '403':
          description: | 
        '405':
          description: Invalid input
          headers: {}
          content: {}
      deprecated: false
      security: []

    put:
      tags:
        - projects
      summary: putProjectSubscription
      description: |-
        Ce service permet de mettre à jour la subscription à un project de l'utilisateur connecté.
      operationId: putProjectSubscription
      parameters:
        - name : slug
          in: path
          description: Slug (string) du projet
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Subscription'
        required: true
      responses:
        '200':
          description: Résultat
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/Subscription'
            application/json:
              schema:
                $ref: '#/components/schemas/Subscription'
        '401':
          description: |

        '400':
          description:  |

        '403':
          description: | 
        '405':
          description: Invalid input
          headers: {}
          content: {}
      deprecated: false
      security: []

  /api/projects/{slug}/feature/{feature_id}/position-in-list/:
    get:
      tags:
        - projects
      summary: getProjectFeaturePositionInList
      description: |-
        Ce service permet de récupérer 
      operationId: getProjectFeaturePositionInList
      parameters:
        - name : slug
          in: path
          description: Slug (string) du projet
          required: true
          schema:
            type: string
        - name : feature_id
          in: path
          description: UUID du signalement
          required: true
          schema:
            type: string
        - name : ordering
          in: query
          description: Recherche par un paramètre de requête ?ordering=...
          schema:
            type: string
        - name : offset
          in: query
          description: Recherche par un paramètre de requête ?offset=...,  10/50/100
          schema:
            type: string
        - name : feature_type_slug
          in: query
          description: Recherche par un paramètre de requête ?feature_type_slug=...
          schema:
            type: string
        - name : status
          in: query
          description: Recherche par un paramètre de requête ?status=...
          schema:
            type: string
        - name : title
          in: query
          description: Recherche par un paramètre de requête ?title=...
          schema:
            type: string
      responses:
        '200':
           description:  | 
            un entiere de 0 à N
        '401':
          description: |

        '400':
          description:  |

        '403':
          description: | 
        '405':
          description: Invalid input
          headers: {}
          content: {}
      deprecated: false
      security: []

  /api/projects/{slug}/feature-paginated/:
    get:
      tags:
        - projects
      summary: getProjectFeaturePaginated
      description: |-
        Ce service permet de récupérer 
      operationId: getProjectFeaturePaginated
      parameters:
        - name : slug
          in: path
          description: Slug (string) du projet
          required: true
          schema:
            type: string
        - name : ordering
          in: query
          description: Recherche par un paramètre de requête ?ordering=...
          schema:
            type: string
        - name : limit
          in: query
          description: Recherche par un paramètre de requête ?limit=...
          schema:
            type: string
        - name : offset
          in: query
          description: Recherche par un paramètre de requête ?offset=...,  10/50/100
          schema:
            type: string
        - name : feature_type_slug
          in: query
          description: Recherche par un paramètre de requête ?feature_type_slug=...
          schema:
            type: string
        - name : status__value
          in: query
          description: Recherche par un paramètre de requête ?status__value=...
          schema:
            type: string
        - name : title
          in: query
          description: Recherche par un paramètre de requête ?title=...
          schema:
            type: string
        - name : output
          in: query
          description: Recherche par un paramètre de requête ?output=...
          schema:
            type: string
      responses:
        '200':
          description: Résultat
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/FeaturesPaginated'
            application/json:
              schema:
                $ref: '#/components/schemas/FeaturesPaginated'
        '401':
          description: |

        '400':
          description:  |

        '403':
          description: | 
        '405':
          description: Invalid input
          headers: {}
          content: {}
      deprecated: false
      security: []

  /api/events/:
    get:
      tags:
        - projects
      summary: getEvents
      description: |-
        Ce service permet de récupérer tous les evenements, signalement et commentaires d'un projet ou de tous les projets.
      operationId: getEvents
      parameters:
        - name : project_slug
          in: query
          description: Slug (string) du projet
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Résultat
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/Events'
            application/json:
              schema:
                $ref: '#/components/schemas/Events'
        '401':
          description: |

        '400':
          description:  |

        '403':
          description: | 
        '405':
          description: Invalid input
          headers: {}
          content: {}
      deprecated: false
      security: []

  /api/exif-geom-reader/:
    post:
    tags:
      - misc
    summary: addExifGeomReader
    description: |-
      Ce service permet de dupliquer un project.
    operationId: addExifGeomReader
    parameters:
      - name : slug
        in: path
        description: Creation du project à partir de son slug (string)
        required: true
        schema:
          type: string
    requestBody:
      content:
        image/png:
          schema:
            type: string
            format: binary
      required: true
    responses:
      '201':
        description: Création
        content:
          application/json:
          schema:
              type: object
          application/xml:
          schema:
              type: object
      '401':
        description: |

      '400':
        description:  |

      '403':
        description: | 
      '405':
        description: Invalid input
        headers: {}
        content: {}
    deprecated: false
    security: []
      

  # /api/features/<uuid:feature_id>/feature-links/:
  # /api/features/<uuid:feature_id>/events/:
  # /api/features/<uuid:feature_id>/attachments/:
  # /api/features/<uuid:feature_id>/attachments/<uuid:attachment_id>/:
  # /api/features/<uuid:feature_id>/attachments/<uuid:attachment_id>/upload-file/:
  # /api/features/<uuid:feature_id>/comments/:
  # /api/features/<uuid:feature_id>/comments/<uuid:comment_id>/:
  # /api/features/<uuid:feature_id>/comments/<uuid:comment_id>/upload-file/:
  # /api/features.mvt/:
  # /api/external-geojson/:
  # /api/idgo-catalog/:
  # /api/proxy/:
  # /api/prerecorded-list-values/:
  # /api/prerecorded-list-values/<str:name>/:
  # /api/get-token/:
  # /api/customfields/:
  # /api/projects/<slug:slug>/feature-types/:
  # /api/projects/<slug:slug>/feature/:
  # /api/v2/users/:
  # /api/v2/users/{pk}/:
  # /api/v2/import-tasks/:
  # /api/v2/import-tasks/{pk}/:
  # /api/v2/base-maps/:
  # /api/v2/base-maps/{pk}/:
  # /api/v2/layers/:
  # /api/v2/layers/{pk}/:
  # /api/v2/levels-permissions/:
  # /api/v2/levels-permissions/{pk}/:
  # /api/features/:
  # /api/features/{feature_id}/:
  # /api/feature-types/:
  # /api/feature-types/{slug}/:
  # /api/project-types/:
  # /api/project-types/{pk}/:
  # /api/{format}/:

  /api/v2/features:
    get:
      tags:
        - features
      summary: getFeatures
      description: |-
        Ce service permet de récuperer tous les signalements.
      operationId: getFeatures
      parameters:
        - name: project__slug
          in: query
          description: Recherche par un paramètre de requête ?project__slug=...
          required: false
          schema:
            type: string
        - name: feature_type__slug
          in: query
          description: Recherche par un paramètre de requête ?feature_type__slug=...
          required: false
          schema:
            type: string
        - name: output
          in: query
          description: Recherche par un paramètre de requête ?output=..., geojson/list, geojson par default
          required: false
          schema:
            type: string
        - name: title__contains
          in: query
          description: Recherche par un paramètre de requête ?title__contains=...
          required: false
          schema:
            type: string
        - name: title__icontains
          in: query
          description: Recherche par un paramètre de requête ?title__icontains=...
          schema:
            type: string
        - name : ordering
          in: query
          description: Recherche par un paramètre de requête ?ordering=...
          schema:
            type: string
        - name : limit
          in: query
          description: Recherche par un paramètre de requête ?limit=...,  10/50/100
          schema:
            type: string
        - name : id
          in: query
          description: Recherche par un paramètre de requête ?id=...,  1/2/3 ...
          schema:
            type: string
      responses:
        '200':
          description: Résultat
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/FeaturesGet'
            application/json:
              schema:
                $ref: '#/components/schemas/FeaturesGet'
        '404':
          description:  | 
            {"detail": "Pas trouvé."}
          headers: {}
          content: {}
      deprecated: false
      security: []
  /api/v2/features/{feature_id}:
    get:
      tags:
        - features
      summary: getFeature
      description: |-
        Ce service permet de récuperer le detail d'un signalement.
      operationId: getFeature
      parameters:
        - name : feature_id
          in: path
          description: Recherche par feature_id (uuid)
          required: true
          schema:
            type: string
        - name: project__slug
          in: query
          description: Recherche par un paramètre de requête ?project__slug=...
          required: false
          schema:
            type: string
        - name: feature_type__slug
          in: query
          description: Recherche par un paramètre de requête ?feature_type__slug=...
          required: false
          schema:
            type: string
        
      responses:
        '200':
          description: Résultat
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/FeatureGet'
            application/json:
              schema:
                $ref: '#/components/schemas/FeatureGet'
        '404':
          description:   | 
            {"detail": "Pas trouvé."}
          headers: {}
          content: {}
  /api/v2/feature-types:
    get:
      tags:
        - featurestypes
      summary: getFeaturesTypes
      description: |-
        Ce service permet de récuperer tous les types de signalements.
      operationId: getFeaturesTypes
      parameters:
        - name: project__slug
          in: query
          description: Recherche par un paramètre de requête ?project__slug=...
          required: false
          schema:
            type: string
        - name: feature_type__slug
          in: query
          description: Recherche par un paramètre de requête ?feature_type__slug=...
          required: false
          schema:
            type: string
        
      responses:
        '200':
          description: Résultat
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/FeaturesTypesGet'
            application/json:
              schema:
                $ref: '#/components/schemas/FeaturesTypesGet'
        '404':
          description:  | 
            {"detail": "Pas trouvé."}
          headers: {}
          content: {}
      deprecated: false
      security: []
  /api/v2/feature-types/{slug}:
    get:
      tags:
        - featurestypes
      summary: getFeatureType
      description: |-
        Ce service permet de récuperer le detail d'un type de signalement.
      operationId: getFeatureType
      parameters:
        - name : slug
          in: path
          description: Recherche par feature type slug
          required: true
          schema:
            type: string

      responses:
        '200':
          description: Résultat
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/FeatureTypeGet'
            application/json:
              schema:
                $ref: '#/components/schemas/FeatureTypeGet'
        '404':
          description:   | 
            {"detail": "Pas trouvé."}
          headers: {}
          content: {}

  /api/get-token:
    get:
      tags:
        - users
      summary: getToken
      description: |-
        Ce service permet de récuperer le token de l'utilisateur connecté.
      operationId: getToken
      responses:
        '200':
          description: Résultat
          content:
           application/json:
            schema:
                type: object
           application/xml:
            schema:
                type: object
        
        '403':
          description: | 
           {"detail": "Informations d'authentification non fournies."}
      deprecated: false
      security: []
  /api/user_info:
    get:
      tags:
        - users
      summary: userInfo
      description: |-
        Ce service permet de récuperer le token de l'utilisateur connecté.
      operationId: userInfo
      responses:
        '200':
          description: Résultat
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/User'
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '403':
          description: | 
           {"detail": "Informations d'authentification non fournies."}
      deprecated: false
      security: []
  /api/user-level-projects:
    get:
      tags:
        - users
      summary: userLevelProjects
      description: |-
        Ce service permet de récuperer les profiles de l'utilisateur connecté par projet.
      operationId: userLevelProjects
      responses:
        '200':
          description: Résultat
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/UserLevelProjects'
            application/json:
              schema:
                $ref: '#/components/schemas/UserLevelProjects'
      deprecated: false
      security: []
  /api/user-permissions:
    get:
      tags:
        - users
      summary: userPermissions
      description: |-
        Ce service permet de récuperer tous les permissions de l'utilisateur connecté par projet.
      operationId: userPermissions
      responses:
        '200':
          description: Résultat
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/userPermissions'
            application/json:
              schema:
                $ref: '#/components/schemas/userPermissions'
      deprecated: false
      security: []
  /api/login:
    post:
      tags:
        - auth
      summary: login
      description: |-
        Ce service permet de se logguer sur geocontrib.
      operationId: login
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Login'
        required: true
      responses:
        '200':
          description: Résultat
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/LoginDetail'
            application/json:
              schema:
                $ref: '#/components/schemas/LoginDetail'
        '400':
          description: | 
            {"username": ["Ce champ est obligatoire."]}
            {"password": ["Ce champ est obligatoire."]}
        '403':
          description: | 
            {"detail": "Informations d'authentification incorrectes."}
            {"detail": "Informations d'authentification non fournies."}
      deprecated: false
      security: []
  /api/logout:
    get:
      tags:
        - auth
      summary: logout
      description: |-
        Ce service permet de se delogguer sur geocontrib.
      operationId: logout
      responses:
        '200':
          description:  | 
            "detail": {username} signed out"
        '403':
          description: | 
           {"detail": "Informations d'authentification non fournies."}
      deprecated: false
      security: []
  /api/version:
    get:
      tags:
        - version
      summary: version
      description: |-
        Ce service permet de récuperer la version de geocontrib.
      operationId: version
      responses:
        '200':
          description: Résultat
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/Version'
            application/json:
              schema:
                $ref: '#/components/schemas/Version'
      deprecated: false
      security: []
  /api/flat-pages:
    get:
      tags:
        - flat-pages
      summary: flat-pages
      description: |-
        Ce service permet permet récupérer le contenu HTML "plat" dans la base de données.
      operationId: flat-pages
      responses:
        '200':
          description: Résultat
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/FlatPages'
            application/json:
              schema:
                $ref: '#/components/schemas/FlatPages'
      deprecated: false
      security: []
 
components:
  schemas:
    ProjectComments:
      title: ProjectComments
      type: object
      properties:
        last_comments:
          type: string
    BboxProject:
      title: BboxProject
      type: object
      properties:
        minLon:
          type: number
        minLat:
          type: number
        maxLon:
          type: number
        maxLat:
          type: number
    FlatPages:
      title: FlatPages
      type: object
      properties:
        url:
          type: string
        title:
          type: string
        content:
          type: string
        sites:
          type: array
          items: 
            type: number
        template_name:
          type: string
    Login:
      title: Login
      type: object
      properties:
        username:
          type: string
        password:
          type: string
    LoginDetail:
      title: LoginDetail
      type: object
      properties:
        detail:
          type: string
        user:
          type: object
          properties:
            username:
              type: string
            is_active:
              type: string
            first_name:
              type: string
            last_name:
              type: string
            is_administrator:
              type: boolean
            is_superuser:
              type: boolean
            can_create_project:
              type: boolean
            email:
              type: string
            id:
              type: number
    Version:
      title: Version
      type: object
      properties:
        geocontrib:
          type: string
        geocontrib-celery:
          type: string
    User:
      title: User
      type: object
      properties:
        username:
          type: string
        is_active:
          type: boolean
        firs_tName:
          type: string
        last_Name:
          type: string
        is_administrator:
          type: boolean
        is_superuser:
          type: boolean
        can_create_project:
          type: boolean
        email:
          type: string
        id:
          type: integer
    UserLevelProjects:
      title: UserLevelProjects
      type: object
      properties:
        project-name:
          type: string
    UserProject:
      title: UserProject
      type: array
      items:
        type: object
        properties:
          user:
            type: object
            properties:
              id:
                type: number
              first_name:
                type: string
              last_name:
                type: string
              username:
                type: string
          level:
            type: object
            properties:
              display:
                type: string
              codename:
                type: string
    userPermissions:
      title: userPermissions
      type: object
      properties:
        project-name:
          type: object
          properties:
            can_view_project:
              type: boolean
            can_create_project:
              type: boolean
            can_update_project:
              type: boolean
            can_view_feature:
              type: boolean
            can_view_archived_feature:
              type: boolean
            can_create_feature:
              type: boolean
            can_delete_feature:
              type: boolean
            can_publish_feature:
              type: boolean
            can_create_feature_type:
              type: boolean
            can_view_feature_type:
              type: boolean
            is_project_super_contributor:
              type: boolean
            is_project_moderator:
              type: boolean
            is_project_administrator:
              type: boolean
    ProjectPost:
      title: ProjectPost
      type: object
      required:
        - title
        - access_level_arch_feature
        - access_level_pub_feature
        - archive_feature
        - delete_feature
        - description
        - fast_edition_mode
        - generate_share_link
        - is_project_type
        - map_max_zoom_level
        - moderation
      properties:
        title:
          type: string
        slug: 
          type: string
        description:
          type: string
        moderation:
          type: boolean
        is_project_type:
          type: boolean
          description: Est un projet type
        generate_share_link:
          type: boolean
          description: Génération d'un lien de partage externe
        fast_edition_mode:
          type: boolean
          description: Génération d'un lien de partage externe
        creator:
          type: integer
          description: Créateur
        access_level_pub_feature:
          type: string
          description: Visibilité des signalements publiés
        access_level_arch_feature:
          type: string
          description: Visibilité des signalements archivés
        archive_feature:
          type: integer
          description: Délai avant archivage
        delete_feature:
          type: integer
          description: Délai avant suppression
        map_max_zoom_level:
          type: integer
          description: Niveau de zoom maximum de la carte
        feature_browsing_default_filter:
          type: integer
          description: Mode d'édition rapide de signalements
        feature_browsing_default_sort:
          type: integer
          description: Tri par défaut du parcours du signalement
    ProjectUpdate:
      title: ProjectUpdate
      type: object
      required:
        - title
        - access_level_arch_feature
        - access_level_pub_feature
        - archive_feature
        - delete_feature
        - description
        - fast_edition_mode
        - generate_share_link
        - is_project_type
        - map_max_zoom_level
        - moderation
        - feature_browsing_default_filter
        - feature_browsing_default_sort
      properties:
        title:
          type: string
        slug: 
          type: string
        description:
          type: string
        moderation:
          type: boolean
        is_project_type:
          type: boolean
          description: Est un projet type
        generate_share_link:
          type: boolean
          description: Génération d'un lien de partage externe
        fast_edition_mode:
          type: boolean
          description: Génération d'un lien de partage externe
        creator:
          type: integer
          description: Créateur
        access_level_pub_feature:
          type: string
          description: Visibilité des signalements publiés
        access_level_arch_feature:
          type: string
          description: Visibilité des signalements archivés
        archive_feature:
          type: integer
          description: Délai avant archivage
        delete_feature:
          type: integer
          description: Délai avant suppression
        map_max_zoom_level:
          type: integer
          description: Niveau de zoom maximum de la carte
        feature_browsing_default_filter:
          type: integer
          description: Mode d'édition rapide de signalements
        feature_browsing_default_sort:
          type: integer
          description: Tri par défaut du parcours du signalement
    ProjectsGet:
      title: ProjectsGet
      type: object
      properties:
        count:
          type: integer
        next:
          type: string
        previous: 
          type: string
        results:
          type: array
          items:
            type: object
            properties:
              title:
                type: string
              slug:
                type: string
              created_on:
                type: string
                description: Date de création
                example: AAAA-MM-JJ ou JJ-MM-AAAA
              updated_on:
                type: string
                description: Date de modification
                example: AAAA-MM-JJ ou JJ-MM-AAAA
              description:
                type: string
              moderation:
                type: boolean
              is_project_type:
                type: boolean
                description: Est un projet type
              generate_share_link:
                type: boolean
                description: Génération d'un lien de partage externe
              fast_edition_mode:
                type: boolean
                description: Génération d'un lien de partage externe
              thumbnail:
                type: string
                description: Date de création
              creator:
                type: integer
                description: Créateur
              access_level_pub_feature:
                type: string
                description: Visibilité des signalements publiés
              access_level_arch_feature:
                type: string
                description: Visibilité des signalements archivés
              archive_feature:
                type: integer
                description: Délai avant archivage
              delete_feature:
                type: integer
                description: Délai avant suppression
              map_max_zoom_level:
                type: integer
                description: Niveau de zoom maximum de la carte
              nb_features:
                type: integer
              nb_published_features:
                type: integer
              nb_comments:
                type: integer
              nb_published_features_comments:
                type: integer
              nb_contributors:
                type: integer
              feature_browsing_default_filter:
                type: integer
                description: Mode d'édition rapide de signalements
              feature_browsing_default_sort:
                type: integer
                description: Tri par défaut du parcours du signalement
    ProjectGet:
      title: ProjectGet
      type: object
      properties:
        title:
          type: string
        slug:
          type: string
        created_on:
          type: string
          description: Date de création
          example: AAAA-MM-JJ ou JJ-MM-AAAA
        updated_on:
          type: string
          description: Date de modification
          example: AAAA-MM-JJ ou JJ-MM-AAAA
        description:
          type: string
        moderation:
          type: boolean
        is_project_type:
          type: boolean
          description: Est un projet type
        generate_share_link:
          type: boolean
          description: Génération d'un lien de partage externe
        fast_edition_mode:
          type: boolean
          description: Génération d'un lien de partage externe
        thumbnail:
          type: string
          description: Date de création
        creator:
          type: integer
          description: Créateur
        access_level_pub_feature:
          type: string
          description: Visibilité des signalements publiés
        access_level_arch_feature:
          type: string
          description: Visibilité des signalements archivés
        archive_feature:
          type: integer
          description: Délai avant archivage
        delete_feature:
          type: integer
          description: Délai avant suppression
        map_max_zoom_level:
          type: integer
          description: Niveau de zoom maximum de la carte
        nb_features:
          type: integer
        nb_published_features:
          type: integer
        nb_comments:
          type: integer
        nb_published_features_comments:
          type: integer
        nb_contributors:
          type: integer
        feature_browsing_default_filter:
          type: integer
          description: Mode d'édition rapide de signalements
        feature_browsing_default_sort:
          type: integer
          description: Tri par défaut du parcours du signalement
    FeaturesGet:
        title: FeaturesGet
        type: object
        properties:
          count:
            type: integer
          features:
            type: array
            items:
              type: object
              properties:
                feature_id:
                  type: string
                title:
                  type: string
                description:
                  type: string
                status:
                  type: string
                created_on:
                  type: string
                  description: Date de création
                  example: AAAA-MM-JJ ou JJ-MM-AAAA
                updated_on:
                  type: string
                  description: Date de modification
                  example: AAAA-MM-JJ ou JJ-MM-AAAA
                creator:
                  type: string
                display_creator:
                  type: string
                display_last_editor:
                  type: string
                project:
                  type: string
                feature_type:
                  type: object
                  description: Génération d'un lien de partage externe
                  properties:
                    title:
                      type: string
                    slug:
                      type: string
                    geom_type:
                      type: string
                    customfield_set:
                      type: array
                      items:
                        type: object
                        properties:
                          position:
                            type: string
                          label:
                            type: string
                          name:
                            type: string
                          field_type:
                            type: string
                          options:
                            type: array
                            items:
                              type: string
                          is_mandatory:
                            type: boolean
                    project:
                      type: string
                geom:
                  type: object
                  properties:
                    type:
                      type: string
                    coordinates:
                      type: array
                      items:
                        type: number
                feature_data:
                  type: array
                  items:
                    properties:
                      label:
                        type: string
                      field_type:
                        type: string
                      value:
                        type: string
                archived_on:
                  type: boolean
                access_level_pub_feature:
                  type: string
                  description: Visibilité des signalements publiés
                access_level_arch_feature:
                  type: string
                  description: Visibilité des signalements archivés
                archive_feature:
                  type: integer
                  description: Délai avant archivage
                delete_feature:
                  type: integer
                  description: Délai avant suppression
                map_max_zoom_level:
                  type: integer
                  description: Niveau de zoom maximum de la carte
                nb_features:
                  type: integer
                nb_published_features:
                  type: integer
                nb_comments:
                  type: integer
                nb_published_features_comments:
                  type: integer
                nb_contributors:
                  type: integer
                feature_browsing_default_filter:
                  type: integer
                  description: Mode d'édition rapide de signalements
                feature_browsing_default_sort:
                  type: integer
                  description: Tri par défaut du parcours du signalement
    FeaturesPaginated:
        title: FeaturesPaginated
        type: object
        properties:
          count:
            type: integer
          next:
            type: string
          previous:
            type: string
          results:
            type: array
            items:
              type: object
              properties:
                feature_id:
                  type: string
                title:
                  type: string
                description:
                  type: string
                status:
                  type: string
                created_on:
                  type: string
                  description: Date de création
                  example: AAAA-MM-JJ ou JJ-MM-AAAA
                updated_on:
                  type: string
                  description: Date de modification
                  example: AAAA-MM-JJ ou JJ-MM-AAAA
                creator:
                  type: string
                display_creator:
                  type: string
                display_last_editor:
                  type: string
                project:
                  type: string
                feature_type:
                  type: object
                  description: Génération d'un lien de partage externe
                  properties:
                    title:
                      type: string
                    slug:
                      type: string
                    geom_type:
                      type: string
                    customfield_set:
                      type: array
                      items:
                        type: object
                        properties:
                          position:
                            type: string
                          label:
                            type: string
                          name:
                            type: string
                          field_type:
                            type: string
                          options:
                            type: array
                            items:
                              type: string
                          is_mandatory:
                            type: boolean
                    project:
                      type: string
                geom:
                  type: object
                  properties:
                    type:
                      type: string
                    coordinates:
                      type: array
                      items:
                        type: number
                feature_data:
                  type: array
                  items:
                    properties:
                      label:
                        type: string
                      field_type:
                        type: string
                      value:
                        type: string
    FeatureGet:
      title: FeatureGet
      type: object
      properties:
        title:
          type: string
        slug:
          type: string
        created_on:
          type: string
          description: Date de création
          example: AAAA-MM-JJ ou JJ-MM-AAAA
        updated_on:
          type: string
          description: Date de modification
          example: AAAA-MM-JJ ou JJ-MM-AAAA
        description:
          type: string
        moderation:
          type: boolean
        is_project_type:
          type: boolean
          description: Est un projet type
        generate_share_link:
          type: boolean
          description: Génération d'un lien de partage externe
        fast_edition_mode:
          type: boolean
          description: Génération d'un lien de partage externe
        thumbnail:
          type: string
          description: Date de création
        creator:
          type: integer
          description: Créateur
        access_level_pub_feature:
          type: string
          description: Visibilité des signalements publiés
        access_level_arch_feature:
          type: string
          description: Visibilité des signalements archivés
        archive_feature:
          type: integer
          description: Délai avant archivage
        delete_feature:
          type: integer
          description: Délai avant suppression
        map_max_zoom_level:
          type: integer
          description: Niveau de zoom maximum de la carte
        nb_features:
          type: integer
        nb_published_features:
          type: integer
        nb_comments:
          type: integer
        nb_published_features_comments:
          type: integer
        nb_contributors:
          type: integer
        feature_browsing_default_filter:
          type: integer
          description: Mode d'édition rapide de signalements
        feature_browsing_default_sort:
          type: integer
          description: Tri par défaut du parcours du signalement
    FeatureSearch:
      title: FeatureSearch
      type: object
      properties:
          count:
            type: integer
          next:
            type: string
          previous:
            type: string
          results:
            type: array
            items:
              type: object
              properties:
                feature_id:
                  type: string
                title:
                  type: string
                description:
                  type: string
                status:
                  type: string
                creator:
                  type: object
                  properties:
                    full_name:
                      type: string
                    username:
                      type: string
                created_on:
                  type: string
                  description: Date de création
                  example: AAAA-MM-JJ ou JJ-MM-AAAA
                updated_on:
                  type: string
                  description: Date de modification
                  example: AAAA-MM-JJ ou JJ-MM-AAAA
                archived_on:
                  type: string
                  description: Date de archive
                  example: AAAA-MM-JJ ou JJ-MM-AAAA
                deletion_on:
                  type: string
                  description: Date de suppresion
                  example: AAAA-MM-JJ ou JJ-MM-AAAA
                project_slug:
                  type: string
                feature_type_slug:
                  type: string
                geom:
                  type: object
                  properties:
                    type:
                      type: string
                    coordinates:
                      type: array
                      items:
                        type: number
    FeatureTypeGet:
      title: FeatureTypeGet
      type: object
      properties:
        title:
          type: string
        title_optional:
          type: boolean
        slug:
          type: string
        geom_type:
          type: string
        icon:
          type: string
        opacity:
          type: string
        color_style:
          type: object
          properties:
            colors:
              type: object
            custom_field_name:
              type: string
        project:
          type: string
        customfield_set:
          type: array
          items:
            type: object
            properties:
              position:
                type: string
              label:
                type: string
              name:
                type: string
              field_type:
                type: string
              options:
                type: array
                items:
                  type: string
              is_mandatory:
                type: boolean
        is_editable:
          type: boolean
    FeaturesTypesGet:
      title: FeaturesTypesGet
      type: array
      items:
        $ref: '#/components/schemas/FeatureTypeGet'
    GeojsonFeatures:
      title: GeojsonFeatures
      type: object
      properties:
        type:
          type: string
        features:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
              type:
                type: string
              geometry:
                type: object
                properties:
                  type:
                    type: string
                  coordinates:
                    type: array
                    items:
                      type: string
              properties:
                type: object
                properties:
                  title:
                    type: string
                  description:
                    type: string
                  status:
                    type: string
                  created_on:
                    type: string
                    description: Date de création
                    example: AAAA-MM-JJ ou JJ-MM-AAAA
                  updated_on:
                    type: string
                  archived_on:
                    type: string
                  deletion_on:
                    type: string
                  feature_type:
                    type: string
                  project:
                    type: string
                  display_creator:
                    type: string
                  creator:
                    type: number
    Subscription:
      title: Subscription
      type: object
      properties:
        is_suscriber:
          type: boolean
    Events:
      title: GeojsonFeatures
      type: object
      properties:
        events:
          type: object
          properties:
            created_on:
              type: string
              description: Date de création
              example: AAAA-MM-JJ ou JJ-MM-AAAA
            object_type:
              type: string
            event_type:
              type: string
            data:
              type: object
              properties:
                extra:
                  type: object
                  properties:
                    nom:
                      type: string
                    code:
                      type: string
                feature_title:
                  type: string
                feature_status:
                  type: string
                project_slug:
                  type: object
                  properties:
                    new_status:
                      type: string
                    has_changed:
                      type: boolean
            project_slug:
              type: string
            feature_type_slug:
              type: string
            feature_id:
              type: string
            comment_id:
              type: string
            attachment_id:
              type: string
            display_user:
              type: string
            related_comment:
              type: object
              properties:
                comment:
                  type: string
                
                attachments:
                  type: array
                  items:
                    type: object
                    properties:
                      url:
                        type: string
                      title:
                        type: string
            related_feature:
              type: object
              properties:
                feature_id:
                  type: string
                title:
                  type: string
                feature_url:
                  type: string
            project_url:
              type: string
        features:
          type: array
          items:
            type: object
            properties:
              created_on:
                type: string
                description: Date de création
                example: AAAA-MM-JJ ou JJ-MM-AAAA
              object_type:
                type: string
              event_type:
                type: string
              data:
                type: object
                properties:
                  extra:
                    type: object
                    properties:
                      nom:
                        type: string
                      code:
                        type: string
                  feature_title:
                    type: string
                  feature_status:
                    type: object
                    properties:
                      new_status:
                        type: string
                      has_changed:
                        type: boolean
              project_slug:
                type: string
              feature_type_slug:
                type: string
              feature_id:
                type: string
              comment_id:
                type: string
              attachment_id:
                type: string
              display_user:
                type: string
              related_comment:
                type: object
                properties:
                  comment:
                    type: string
                  attachments:
                    type: array
                    items:
                      type: object
                      properties:
                        url:
                          type: string
                        title:
                          type: string
              related_feature:
                type: object
                properties:
                  feature_id:
                    type: string
                  title:
                    type: string
                  feature_url:
                    type: string
              project_url:
                type: string
        comments:
          type: array
          items:
            type: object
            properties:
              created_on:
                type: string
                description: Date de création
                example: AAAA-MM-JJ ou JJ-MM-AAAA
              object_type:
                type: string
              event_type:
                type: string
              data:
                type: object
                properties:
                  author:
                    type: string
                  comment:
                    type: string
                  username:
                    type: string
                  project_slug:
                    type: string
              project_slug:
                type: string
              feature_type_slug:
                type: string
              feature_id:
                type: string
              comment_id:
                type: string
              attachment_id:
                type: string
              display_user:
                type: string
              related_comment:
                type: object
                properties:
                  comment:
                    type: string
                  attachments:
                    type: array
                    items:
                      type: object
                      properties:
                        url:
                          type: string
                        title:
                          type: string
              related_feature:
                type: object
                properties:
                  feature_id:
                    type: string
                  title:
                    type: string
                  feature_url:
                    type: string
              project_url:
                type: string

  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
security: 
  - bearerAuth: []
tags:
  - name: users
    description: Composent users
  - name: projects
    description: Composent projects
  - name: features
    description: Composent features
externalDocs:
  description: Find out more about Swagger
  url: http://swagger.io